<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<title>Magento BI Import API | Documentation Starter Kit</title>
	<meta name="description" content="Start your new documentation project by forking this repository">

	<link rel="stylesheet" href="/assets/css/app.css" />
	<link rel="stylesheet" href="/assets/css/print.css" media="print"/>

	
	<!-- Algolia search setup, do not remove this:  -->
<script>
  var baseUrl = "";
  var algolia = {
    id : "E642SEDTHL",
    index:  "your_index",
    key:  "public_api_key"
  };
</script>

<!-- put all your js or css files here: -->


	<link rel="shortcut icon" type="image/vnd.microsoft.icon" href="https://magento.com/favicon.ico">
	<link rel="apple-touch-icon" type="image/png" href="https://magento.com/apple-touch-icon.png">
	<link rel="apple-touch-icon" type="image/png" sizes="57x57" href="https://magento.com/apple-touch-icon-57x57.png">
	<link rel="apple-touch-icon" type="image/png" sizes="72x72" href="https://magento.com/apple-touch-icon-72x72.png">
	<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="https://magento.com/apple-touch-icon-76x76.png">
	<link rel="apple-touch-icon" type="image/png" sizes="114x114" href="https://magento.com/apple-touch-icon-114x114.png">
	<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="https://magento.com/apple-touch-icon-120x120.png">
	<link rel="apple-touch-icon" type="image/png" sizes="144x144" href="https://magento.com/apple-touch-icon-144x144.png">
	<link rel="apple-touch-icon" type="image/png" sizes="152x152" href="https://magento.com/apple-touch-icon-152x152.png">
	<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="https://magento.com/apple-touch-icon-180x180.png">

</head>
<body class="layout-default">

	<header class="site-header">

		<nav class="site-nav">

  <div class="menu-btn">
    <button id="menu-btn" class="menu-trigger menu-icon" aria-haspopup="true" aria-controls="nav-main"></button>
  </div>

  <div class="nav-container">

    <a class="logo" href="/">
      <img src="/assets/i/m-logo.svg" alt="">
      <img src="/assets/i/magento-logo.svg" alt="Magento" class="magento-logo" />
      <span class="site-logo">Doc Starter</span>
    </a>

    <div id="nav-main" class="nav-main-wrap" aria-labelledby="menu-btn">
      

      <ul class="nav-main" role="menubar">
    
      <li class="menuitem"><a href="/section/">Section</a></li>
    
      <li class="menuitem"><a href="/another-section/">Another Section</a></li>
    
</ul>

    </div>

    <div class="search-btn">
      <button class="search-trigger search-icon" aria-label="Search"></button>
    </div>

    <form class="quick-search" action="/search/" method="get" novalidate="novalidate">
      <input type="search" name="q" placeholder="Search" />
      <button class="quick-search-close" aria-label="Close search">&times;</button>
    </form>

  </div>
</nav><!-- .site-nav -->
<div class="nav-main-fader"></div>


	</header>

	<div class="global-wrapper">

		

		<div class="main-container">
			<a id="main-content"></a>


<div class="content-container">

	<!-- sidebar -->
<aside class="sidebar">
    <a href="#" data-proofer-ignore class="toc-toggler">Table of Contents</a>
    <div class="sidebar-wrapper">

      







<h4 class="guide-title"></h4>

<ul>
  <li >
    <a href=""></a>
  </li>
  
    
    

    
      




<li >
  <a href="/mbi/cloud-api/">Magento BI Cloud Onboarding API</a>
  
</li>


    

  
    
    

    
      




<li >
  <a href="/mbi/getting-started/">Magento BI Getting Started</a>
  
</li>


    

  
    
    

    
      




<li class="active">
  <a href="/mbi/import-api/">Magento BI Import API</a>
  
</li>


    

  
    
    

    
      




<li >
  <a href="/mbi/libraries/">Magento BI Libraries</a>
  
</li>


    

  
</ul>



    </div>
</aside>
<!-- /sidebar -->


	<section class="content">
		<div class="content-wrap">
			<!-- page-header -->
<section class="page-intro">
	<h1 class="page-heading">Magento BI Import API</h1>
</section>

			<p>The RJMetrics Data Import API allows you to push arbitrary data into your RJMetrics data warehouse. We built it using REST principles for simplicity.</p>

<p>This API accepts and returns valid JSON for all its methods. Each method uses a standard HTTP verb (GET/POST/PUT) and uses standard HTTP response codes for returning statuses.</p>

<h2 id="authentication">Authentication</h2>

<p>Authentication with the Data Import API is done with a single API key and your RJMetrics client id. You can create an API key by logging into RJMetrics and selecting <em>Data</em> &gt; <em>Connections</em> and clicking <em>Add a Data Source</em>. Select the <em>Data Import API</em> data source.</p>

<p><img src="../mbi/images/apikey.png" alt="" /></p>

<p>You can authenticate to the API by providing your API key as a GET parameter on your request.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlighter"><code>curl <span class="nt">-v</span> https://connect.rjmetrics.com/
curl <span class="nt">-v</span> https://connect.rjmetrics.com/v2/client/:cid/authenticate?apikey<span class="o">=</span>:apikey
</code></pre></div></div>

<!-- Available note types: "info", "warning", "tip" -->

<div class="bs-callout bs-callout-warning" id="warning">
  <p>This key has write access to your RJMetrics data warehouse. Do not distribute this key to untrusted third parties.</p>
</div>

<h2 id="return-codes">Return Codes</h2>

<p>The Data Import API uses standard HTTP return codes to indicate the status of a request. Your app should handle each of the following return statuses gracefully.</p>

<p>Generally speaking, codes in the 2xx range indicate a successful transaction, codes in the 4xx range indicate a bad request, and codes in the 5xx range indicate an error on our end. If errors in the 5xx range persist, please contact RJMetrics support.</p>

<ul>
  <li>200 OK - request was successful.</li>
  <li>201 Created - new data was added as a result of the request.</li>
  <li>400 Bad request - Your request was missing a required parameter.</li>
  <li>401 Unauthorized - Authorization failed. Double check your API key.</li>
  <li>404 Not Found - The resource you are looking for does not exist.</li>
  <li>500 Server Error - Something went wrong on RJMetrics’ end.</li>
</ul>

<h2 id="versioning">Versioning</h2>

<p>The current version of the Import API is v2.</p>

<p>v1 is still available, but will be deprecated in the future.</p>

<h2 id="test-environment">Test Environment</h2>
<p>The Data Import API has a full test (sandbox) environment.</p>

<p>The sandbox environment uses the same keys and return codes as the production API, but does not persist incoming data. You can use this environment to test your integration.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlighter"><code>curl <span class="nt">-v</span> https://sandbox-connect.rjmetrics.com/v2/client/:cid/:endpoint?apikey<span class="o">=</span>:apikey
</code></pre></div></div>

<h2 id="methods">Methods</h2>

<h3 id="status">Status</h3>

<p>You can always check the status of the Data Import API. This is called when you instantiate the client. This will return a 200 OK response if the API is operational.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlighter"><code>curl <span class="nt">-v</span> https://connect.rjmetrics.com
</code></pre></div></div>

<h2 id="upsert">Upsert</h2>

<p>The upsert method allows you to push data into your RJMetrics data warehouse. You can push entire arrays of data or single data points. This endpoint will only accept data that have the following properties:</p>

<ul>
  <li>The data must be valid JSON.</li>
  <li>Each data point must contain a <code class="highlighter-rouge">keys</code> field. The <code class="highlighter-rouge">keys</code> field should specify which fields in the records represent the primary key(s).</li>
  <li>An array of data must contain no more than 100 individual data points.</li>
</ul>

<!-- Available note types: "info", "warning", "tip" -->

<div class="bs-callout bs-callout-info" id="info">
  <p>Each data point in your data warehouse will be uniquely indexed by the fields specified in <code class="highlighter-rouge">keys</code>. If a new data point has keys that conflict with a pre-existing data point, the old data point will be replaced.</p>
</div>

<p>Tables in the Data Import API are schemaless. There is no command to create or destroy a table - you can push data to any table name and it will be dynamically generated.</p>

<p>Here are some guidelines for managing tables:</p>

<ul>
  <li>Create one table for each type of data point you are pushing.</li>
  <li>Generally speaking, each data point pushed into a table should have the same schema.</li>
  <li>Typically, one type of ‘thing’ will correspond to one table. For example, a typical eCommerce company might have a ‘customer’, ‘order’, ‘order_item’, and ‘product’ table.</li>
  <li>Table names must be alphanumeric (plus underscores). Bad table names will result in a <code class="highlighter-rouge">400 Bad Request</code> return code.</li>
</ul>

<p>Here’s an example of an Upsert call:</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlighter"><code><span class="err">curl</span><span class="w"> </span><span class="err">-X</span><span class="w"> </span><span class="err">POST</span><span class="w"> </span><span class="err">-d</span><span class="w"> </span><span class="err">@filename</span><span class="w"> </span><span class="err">https</span><span class="p">:</span><span class="err">//connect.rjmetrics.com/v</span><span class="mi">2</span><span class="err">/client/</span><span class="p">:</span><span class="err">cid/table/</span><span class="p">:</span><span class="err">table/data?apikey=</span><span class="p">:</span><span class="err">apikey</span><span class="w"> </span><span class="err">--header</span><span class="w"> </span><span class="s2">"Content-type: application/json"</span><span class="w">

</span><span class="p">:</span><span class="err">cid</span><span class="w"> </span><span class="err">-</span><span class="w"> </span><span class="err">your</span><span class="w"> </span><span class="err">client</span><span class="w"> </span><span class="err">id</span><span class="w">
</span><span class="p">:</span><span class="err">table</span><span class="w"> </span><span class="err">-</span><span class="w"> </span><span class="err">table</span><span class="w"> </span><span class="err">name</span><span class="w">
</span><span class="p">:</span><span class="err">apikey</span><span class="w"> </span><span class="err">-</span><span class="w"> </span><span class="err">your</span><span class="w"> </span><span class="err">API</span><span class="w"> </span><span class="err">key</span><span class="w">
</span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"complete"</span><span class="p">,</span><span class="w">
</span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2012-08-05 04:51:02"</span><span class="w">
</span><span class="err">client.push_data(</span><span class="w">
    </span><span class="s2">"table_name"</span><span class="p">,</span><span class="w">
    </span><span class="err">test_data</span><span class="w">
</span><span class="err">)</span><span class="w">
</span><span class="err">Example</span><span class="w"> </span><span class="mi">1</span><span class="p">:</span><span class="w"> </span><span class="err">Single</span><span class="w"> </span><span class="err">data</span><span class="w"> </span><span class="err">point</span><span class="w">

</span><span class="p">{</span><span class="w">
  </span><span class="s2">"keys"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"id"</span><span class="p">],</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"joe@schmo.com"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pending"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2012-08-01 14:22:32"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span><span class="err">Example</span><span class="w"> </span><span class="mi">2</span><span class="p">:</span><span class="w"> </span><span class="err">Array</span><span class="w"> </span><span class="err">of</span><span class="w"> </span><span class="err">data</span><span class="w"> </span><span class="err">points</span><span class="w">

</span><span class="p">[{</span><span class="w">
  </span><span class="s2">"keys"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"id"</span><span class="p">],</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"joe@schmo.com"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pending"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2012-08-01 14:22:32"</span><span class="w">
</span><span class="p">},{</span><span class="w">
  </span><span class="s2">"keys"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"id"</span><span class="p">],</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
  </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"anne@schmo.com"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pending"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2012-08-03 23:12:30"</span><span class="w">
</span><span class="p">},{</span><span class="w">
  </span><span class="s2">"keys"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"id"</span><span class="p">],</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"joe@schmo.com"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"complete"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2012-08-05 04:51:02"</span><span class="w">
</span><span class="p">}]</span><span class="w">
</span></code></pre></div></div>

			
		</div>
		<!-- /.content-wrap -->

		<div class="page-info">

  

  

  

</div>


	</section>
	<!-- /.content -->

</div> <!-- /.content-container -->


	</div>
	<!-- /.main-container -->
</div>
<!-- /#gl-wrapper -->

<!-- footer-->
<div class="page-footer">
  <div class="container">

    <div class="copyright-links">
      <!-- This is a footer navigation for the site. If you dont plan to add more links here, you can remove this file -->
<ul class="nav footer-links">
  <li><a href="http://magento.com/legal/terms/privacy/">Privacy Policy</a></li>
  <li><a href="http://magento.com/legal/terms/">Terms of Service</a></li>
  <li><a href="http://magento.com/legal/licensing/">License/Trademark FAQ</a></li>
</ul>

    </div>

		<div class="copyright-date">&copy; 2019 Magento. All rights reserved.</div>

  </div>
</div>
<!-- / #footer -->


<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/algoliasearch/3/algoliasearch.min.js"></script>
<script src="/assets/js/app.min.js"></script>



</body>
</html>

